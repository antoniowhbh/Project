{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import'./ExamPal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ExamPal=()=>{const[file,setFile]=useState(null);const[fileName,setFileName]=useState('');const[pdfPath,setPdfPath]=useState('');const[message,setMessage]=useState('');const[chatResponses,setChatResponses]=useState([]);const messageInputRef=useRef(null);const fileInputRef=useRef(null);const chatEndRef=useRef(null);useEffect(()=>{var _chatEndRef$current;(_chatEndRef$current=chatEndRef.current)===null||_chatEndRef$current===void 0?void 0:_chatEndRef$current.scrollIntoView({behavior:'smooth'});},[chatResponses]);const handleFileSelect=event=>{const selectedFile=event.target.files[0];if(selectedFile){setFile(selectedFile);setFileName(selectedFile.name);}};const handleUpload=async()=>{if(!file){alert('Please select a file first.');return;}const formData=new FormData();formData.append('file',file);try{const response=await fetch('http://localhost:5000/pdfchat/upload',{method:'POST',body:formData});const data=await response.json();if(response.ok){setPdfPath(data.path);setMessage('');messageInputRef.current.focus();}else{alert('Upload failed: '+data.error);}}catch(error){console.error('Error:',error);alert('Error uploading file.');}};const sendMessage=async()=>{if(!message||!pdfPath){alert(\"Please upload a file and enter a message before sending.\");return;}appendMessage('You',message);const payload={pdf_path:pdfPath,message};try{const response=await fetch('http://localhost:5000/pdfchat/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await response.json();if(!response.ok)throw new Error(\"HTTP error, status = \".concat(response.status));appendMessage('Helper',data.response);setMessage('');}catch(error){console.error('Error:',error);}};const appendMessage=(sender,text)=>{setChatResponses(prevResponses=>[...prevResponses,{sender,text}]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"chatbot-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-section\",children:[chatResponses.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"welcome-message\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"How can I help you today?\"})}),/*#__PURE__*/_jsxs(\"div\",{id:\"chatResponses\",className:\"chat-responses\",children:[chatResponses.map((response,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"chat-message \".concat(response.sender==='You'?'user-message':'bot-message'),children:response.text},index)),/*#__PURE__*/_jsx(\"div\",{ref:chatEndRef})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-input-section\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();sendMessage();},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file-upload\",style:{display:'none'},onChange:handleFileSelect,ref:fileInputRef}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fileInputRef.current.click(),className:\"file-select-button\",children:\"Select File\"}),/*#__PURE__*/_jsx(\"span\",{children:fileName}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,disabled:!file,className:\"file-upload-button\",children:\"Upload File\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Message Study Pal\",value:message,onChange:e=>setMessage(e.target.value),ref:messageInputRef}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!pdfPath||!message.trim(),children:\"Send\"})]})})]});};export default ExamPal;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","ExamPal","file","setFile","fileName","setFileName","pdfPath","setPdfPath","message","setMessage","chatResponses","setChatResponses","messageInputRef","fileInputRef","chatEndRef","_chatEndRef$current","current","scrollIntoView","behavior","handleFileSelect","event","selectedFile","target","files","name","handleUpload","alert","formData","FormData","append","response","fetch","method","body","data","json","ok","path","focus","error","console","sendMessage","appendMessage","payload","pdf_path","headers","JSON","stringify","Error","concat","status","sender","text","prevResponses","className","children","length","id","map","index","ref","onSubmit","e","preventDefault","type","style","display","onChange","onClick","click","disabled","placeholder","value","trim"],"sources":["/Users/antoniowehbe/PycharmProjects/pythonProject1/src/components/pages/Exam Pal/ExamPal.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './ExamPal.css';\n\nconst ExamPal = () => {\n  const [file, setFile] = useState(null);\n  const [fileName, setFileName] = useState('');\n  const [pdfPath, setPdfPath] = useState('');\n  const [message, setMessage] = useState('');\n  const [chatResponses, setChatResponses] = useState([]);\n  const messageInputRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const chatEndRef = useRef(null);\n\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [chatResponses]);\n\n  const handleFileSelect = (event) => {\n    const selectedFile = event.target.files[0];\n    if (selectedFile) {\n      setFile(selectedFile);\n      setFileName(selectedFile.name);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!file) {\n      alert('Please select a file first.');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await fetch('http://localhost:5000/pdfchat/upload', { \n        method: 'POST', \n        body: formData \n      });\n      const data = await response.json();\n      if (response.ok) {\n        setPdfPath(data.path);\n        setMessage('');\n        messageInputRef.current.focus();\n      } else {\n        alert('Upload failed: ' + data.error);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('Error uploading file.');\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!message || !pdfPath) {\n      alert(\"Please upload a file and enter a message before sending.\");\n      return;\n    }\n    appendMessage('You', message);\n    const payload = { pdf_path: pdfPath, message };\n\n    try {\n      const response = await fetch('http://localhost:5000/pdfchat/chat', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n      const data = await response.json();\n      if (!response.ok) throw new Error(`HTTP error, status = ${response.status}`);\n      appendMessage('Helper', data.response);\n      setMessage('');\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  };\n\n  const appendMessage = (sender, text) => {\n    setChatResponses(prevResponses => [...prevResponses, { sender, text }]);\n  };\n\n  return (\n    <div className=\"chatbot-container\">\n      <div className=\"chat-section\">\n        {chatResponses.length === 0 && (\n          <div className=\"welcome-message\">\n            <h1>How can I help you today?</h1>\n          </div>\n        )}\n        <div id=\"chatResponses\" className=\"chat-responses\">\n          {chatResponses.map((response, index) => (\n            <div key={index} className={`chat-message ${response.sender === 'You' ? 'user-message' : 'bot-message'}`}>\n              {response.text}\n            </div>\n          ))}\n          <div ref={chatEndRef}></div>\n        </div>\n      </div>\n      <div className=\"chat-input-section\">\n        <form onSubmit={e => { e.preventDefault(); sendMessage(); }}>\n          <input\n            type=\"file\"\n            id=\"file-upload\"\n            style={{ display: 'none' }}\n            onChange={handleFileSelect}\n            ref={fileInputRef}\n          />\n          <button onClick={() => fileInputRef.current.click()} className=\"file-select-button\">Select File</button>\n          <span>{fileName}</span>\n          <button onClick={handleUpload} disabled={!file} className=\"file-upload-button\">Upload File</button>\n          <textarea\n            placeholder=\"Message Study Pal\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            ref={messageInputRef}\n          />\n          <button type=\"submit\" disabled={!pdfPath || !message.trim()}>Send</button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ExamPal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}